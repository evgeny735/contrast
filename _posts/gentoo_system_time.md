---
layout: post
title:  "Установка системного времени в Gentoo"
category: unix
---

#### OpenRC

При использовании `OpenRC` для установки системного времени во время загрузки и синхронизации аппаратных часов во время завершения работы можно воспользоваться init-скриптом `hwclock`. Данная сервис включен по умолчанию и должен быть отключен при использовании вышеуказанного способа синхронизации ядром. Скрипт `hwclock` не следует запускать при использовании часов реального времени ядра.

`rc-update delete hwclock boot`

#### Заметка

Может так случится, что hwclock будет запущен как зависимость от другого rc-сервиса, например sysklogd. В этом случае rc-сервис osclock необходимо добавить на тот же уровень, что и зависимый сервис.

Однако, если необходимо синхронизировать время с помощью OpenRC, в файле `/etc/conf.d/hwclock` для `clock_hctosys` и `clock_systohc` следует установить значение в `YES`. По умолчанию сервис настроена на стандарт `UTC`. Чтобы изменить это на использование стандарта местного времени (`localtime`) необходимо добавить `clock="local"`

```bash
# nano /etc/conf.d/hwclock Синхронизация аппаратных часов
# clock_hctosys="YES" 
# clock_systohc="YES"
# clock="local"
```
Перезапустите сервис hwclock и добавьте его init-скрипт в уровень запуска boot
```bash
# rc-service hwclock restart
# rc-update add hwclock boot 
```
#### Системные часы

Для изменения системного времени можно воспользоваться командой date:

Вывод текущего времени программных часов:

`# date`

Установка нового системного времени, например на 6 мая 2016 года в 12:34:

`# date 050612342016`

Следующая команда выводит текущее на данный момент время аппаратных часов:

`# hwclock --show`

Следующая команда устанавливает время аппаратных часов в соответствии с системным временем:

`# hwclock --systohc`

